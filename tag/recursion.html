<!DOCTYPE html>
<html lang="en">
<head>
        <title>writings - recursion</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
        <link href="http://blog.sitongpeng.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="writings Atom Feed" />
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,400italic,700italic|Droid+Sans+Mono|Merriweather:400,300,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="/theme/css/highlight.css">

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://blog.sitongpeng.com/css/ie.css"/>
                <script src="http://blog.sitongpeng.com/js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="http://blog.sitongpeng.com/css/ie6.css"/><![endif]-->

</head>

<body>

    <header id="sidebar">
        <div class="bounds">
            <a href="https://twitter.com/stoneG_" target="_blank"><img class="face" src="https://raw.github.com/stoneG/stoneg.github.com/master/images/face.jpg"></a>
            <h1><a href="/">writings</a></h1>
            <p>they're the words that got out</p>
                <ul>
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="http://www.sitongpeng.com/about.html">About</a></li>
                    <li><a href="/archives.html">Archives</a></li>
                    <li><a href="/tags.html">Tags</a></li>
                    <li><a href="/feeds/all.atom.xml">Atom</a></li>
                    <li></li>
                            <li><a href="http://twitter.com/stoneG_">Twitter</a></li>
                            <li><a href="https:/github.com/stoneG">Github</a></li>
                </ul>
        </div>
    </header>

    <section id="main">

        <header>
            <h1><a href="http://blog.sitongpeng.com/posts/the-case-for-base-cases.html" rel="bookmark"
                   title="Permalink to The case for base cases">The case for base cases</a></h1>
<p class="date">Monday, January 28, 2013</p>        </header>
        <article>
            <p>You have a complicated problem to solve. How do you start tackling it?</p>
<p>One of the most tried and tested methods of problem solving is nothing more than implementing some noise control. In other words, can you peel back the complexity of the problem and make it simpler?</p>
<h2>Tower of Hanoi</h2>
<p>I finally sat down and tried solving this problem two days ago. For those of you unfamiliar, the <a href="http://en.wikipedia.org/wiki/Tower_of_Hanoi">Tower of Hanoi</a> is an old puzzle that has been mostly re-appropriated as a classic example of algorithmic thought. Here's a version of it:</p>
<p><img alt="Tower of Hanoi, from Wikipedia" src="http://upload.wikimedia.org/wikipedia/commons/0/07/Tower_of_Hanoi.jpeg" /></p>
<p>There are three rods and a number of different sized disks that can slide onto any rod. The puzzle starts with the disks in a neat stack, ascending by size, on the first rod. The objective of the puzzle is to move the entire stack to the last rod, obeying the following rules:  </p>
<ol>
<li>Only one disk may be moved at a time.  </li>
<li>Each move consists of taking the top-most disk from one of the rods and sliding it onto another rod, on top of the other disks that may already be present on that rod.  </li>
<li>No disk may be placed on top of a disk smaller than it.</li>
</ol>
<p>Seems straightforward enough, but let's solve this for N disks. How should we start?</p>
<h2>Let's start with the base cases</h2>
<p>N=1</p>
<div class="highlight"><pre>    |         |         |
    |         |         |
   -|-        |         |
========= ========= =========
    A         B         C

1.  -----------------&gt; -|-
Done.

So we solve N=1 with one move of -|-.
</pre></div>


<p>N=2</p>
<div class="highlight"><pre>    |         |         |
   -|-        |         |
  --|--       |         |
========= ========= =========
    A         B         C

1.  -------&gt; -|-

    |         |         |
    |         |         |
  --|--      -|-        |
========= ========= =========
    A         B         C

2.  ----------------&gt; --|--
3.            -------&gt; -|-
Done.

Let&#39;s take a closer look at these moves:
1. Exactly like solving N=1, except A-&gt;B instead of A-&gt;C.
2. The second step places the largest disc at the base of C.
3. Also solves N=1, only B-&gt;C instead of A-&gt;C.
Done.

Let&#39;s rewrite our steps like this:
1. Solve N=1, except A-&gt;B
2. Move --|-- from A-&gt;C
3. Solve N=1, except B-&gt;C
Done.
</pre></div>


<p>N=3</p>
<div class="highlight"><pre>   -|-        |         |
  --|--       |         |
 ---|---      |         |
========= ========= =========
    A         B         C

1.  -----------------&gt; -|-
2.  ------&gt; --|--
3.           -|- &lt;-------

    |         |         |
    |        -|-        |
 ---|---    --|--       |
========= ========= =========
    A         B         C

4.  ---------------&gt; ---|---
5. -|- &lt;-------
6.            ------&gt; --|--
7.  -----------------&gt; -|-
Done.

Notice how steps 1-3 solve N=2 and places it at B. Rewrite?
1. Solve N=2, except A-&gt;B
2. Move ---|--- from A-&gt;C
3. Solve N=2, except B-&gt;C
Done.
</pre></div>


<p>Interesting. Looks like we have a formula.</p>
<div class="highlight"><pre>N=n
1. Solve N=(n-1), except A-&gt;B
2. Move largest disc from A-&gt;C
3. Solve N=(n-1), except B-&gt;C
</pre></div>


<p>I was pretty excited when I saw this pattern, as it meant I could code up a solution in very few lines of code. Here it is in Python, using a list as a stack:</p>
<div class="highlight"><pre><span class="k">def</span> <span class="nf">solve_hanoi</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">solve_hanoi</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
    <span class="n">C</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">A</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
    <span class="n">solve_hanoi</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
</pre></div>


<p>The trick is to redefine the rods for each recursive <code>n-1</code> call. What's more is you really only need to think about which rod you're starting and ending at. The odd rod out is just the buffer.</p>
<p>I'd show you the code in action but all the computation is behind the scenes and not very interesting. Luckily a quick search on Youtube yielded a visual solution for N=6. Notice how there is a point of symmetry in the middle as the 5 smaller disks sit at B and the largest disk migrates over to C. Utterly awesome!</p>
<iframe style="margin-top:20px;" width="560" height="315" src="http://www.youtube.com/embed/JqC_LsF1iWg" frameborder="0" allowfullscreen></iframe>
    <p class="comments">
        <a href="http://blog.sitongpeng.com/posts/the-case-for-base-cases.html#disqus_thread"></a>.
    </p>
    <p class="tags">
            <a href="http://blog.sitongpeng.com/tag/base-case.html">[base case]</a>
            <a href="http://blog.sitongpeng.com/tag/python.html">[python]</a>
            <a href="http://blog.sitongpeng.com/tag/tower-of-hanoi.html">[tower of hanoi]</a>
            <a href="http://blog.sitongpeng.com/tag/algorithms.html">[algorithms]</a>
            <a href="http://blog.sitongpeng.com/tag/recursion.html">[recursion]</a>
            <a href="http://blog.sitongpeng.com/tag/youtube.html">[youtube]</a>
    </p>
        </article>

        <header>
            <h1><a href="http://blog.sitongpeng.com/posts/project-euler-5.html" rel="bookmark"
                   title="Permalink to Project Euler 5">Project Euler 5</a></h1>
<p class="date">Monday, December 17, 2012</p>        </header>
        <article>
            <p>2520 is the smallest number that can be divided by each of the numbers
from 1 to 10 without any remainder. What is the smallest positive number
that is evenly divisible by all of the numbers from 1 to 20?</p>
<p>I’ve found that I usually want to solve these problems using a more
functional programming style. For instance, my solution uses uses a
recursive <strong>prime_factorization</strong> helper function and reduce. But then
again, it also uses iterative loops, but only because I didn’t feel like
keeping track of the laundry list of factors recursively :). Anyways,
the format of my solution is as such:</p>
<ul class="simple">
<li>Initial notes about the problem</li>
<li>General solution for any positive integer n.</li>
</ul>
<p><pre class="literal-block">
# 1, 2, 3, 4, 5, 6, 7, 8, 9, 10# Basically 2520 = product of the prime factors of the above numbers# So... 2520 = 2*3*2*5*7*2*3# A general solution would check if the prime factorization of some 'n'# is already in the set of prime factorizations from the 'n-1' term.def prime_factorization(num, divisor=2):    &quot;&quot;&quot;Given an non-neg int num, return the prime factorization in a list.&quot;&quot;&quot;    if num &lt; 2:        return [num]    elif num % divisor:        divisor += 1        return prime_factorization(num, divisor)    else:        return prime_factorization(num/divisor, divisor) + [divisor]def product(a, b):    &quot;&quot;&quot;Returns a * b.&quot;&quot;&quot;    return a * bdef super_product(num):    &quot;&quot;&quot;Given an integer num, find the smallest positive number that is    divisible by all integers [1, num].    &quot;&quot;&quot;    factors = []    while num &gt; 1:        pf = prime_factorization(num)        for factor in pf:            try:                factors.remove(factor)            except ValueError:                continue        factors += pf        num -= 1    return reduce(product, factors)
</pre>
</p></p>
    <p class="comments">
        <a href="http://blog.sitongpeng.com/posts/project-euler-5.html#disqus_thread"></a>.
    </p>
    <p class="tags">
            <a href="http://blog.sitongpeng.com/tag/project-euler-5.html">[project euler 5]</a>
            <a href="http://blog.sitongpeng.com/tag/prime-factorization.html">[prime factorization]</a>
            <a href="http://blog.sitongpeng.com/tag/functional-programming.html">[functional programming]</a>
            <a href="http://blog.sitongpeng.com/tag/recursion.html">[recursion]</a>
            <a href="http://blog.sitongpeng.com/tag/python.html">[python]</a>
    </p>
        </article>
<p class="paginator">
    Page 1 / 1
</p>
        <footer>
        Awesomeness powered by <a href="http://getpelican.com/">Pelican</a> and <a href="http://jinja.pocoo.org/docs/">Jinja2</a>.
        </footer>
    </section>

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37415854-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'sitong-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>