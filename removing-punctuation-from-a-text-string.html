<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Removing punctuation from a text string</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li class="active"><a href="/category/2012.html">2012</a></li>
                    <li><a href="/category/2013.html">2013</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/removing-punctuation-from-a-text-string.html" rel="bookmark"
           title="Permalink to Removing punctuation from a text string">Removing punctuation from a text string</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-12-03T06:07:00">
                Mon 03 December 2012
        </abbr>

<p>In <a href="/category/2012.html">2012</a>. </p>
<p>tags: <a href="/tag/python.html">python</a><a href="/tag/removing.html">removing</a><a href="/tag/punctuation.html">punctuation</a><a href="/tag/from.html">from</a><a href="/tag/a.html">a</a><a href="/tag/text.html">text</a><a href="/tag/string.html">string</a><a href="/tag/benchmark.html">benchmark</a><a href="/tag/set.html">set</a><a href="/tag/regex.html">regex</a><a href="/tag/translate.html">translate</a><a href="/tag/replace.html">replace</a><a href="/tag/linguist.html">linguist</a><a href="/tag/project-gutenberg.html">project gutenberg</a><a href="/tag/scrabble.html">scrabble</a><a href="/tag/a-christmas-carol.html">a christmas carol</a></p>
</footer><!-- /.post-info -->      <p>I was working on a side project last week. It’s called <a class="reference external" href="https://github.com/stoneG/linguist">Linguist</a> and
one of the components of the project requires me to have a large corpus
of English word frequencies. After some research, I decided I could
focus on all the words in the <a class="reference external" href="http://en.wikipedia.org/wiki/Official_Tournament_and_Club_Word_List">Scrabble Official Word List (OWL)</a> and
wrangle out the word counts using all English books on <a class="reference external" href="http://www.gutenberg.org/">Project
Gutenberg</a>. This was a bit more strenuous of an undertaking than I had
anticipated, as Project Gutenberg’s English library is quite sizable.
So, obviously, I first need a quick way to remove all punctuation from
these ebooks so I can iterate through them to build my word count
dictionary.</p>
<div class="section" id="so-whats-a-fast-way-to-do-that-in-python">
<h2>So what’s a fast way to do that in Python?</h2>
</p><p>Let’s consider using: string.replace, sets, regex, and string.translate.
We’ll use <a class="reference external" href="http://www.gutenberg.org/ebooks/46">A Christmas Carol</a> as our benchmark text, since it’s
December.</p>
<p><pre class="literal-block">
f = open('A_Christmas_Carol.txt', 'r')book = f.read()f.close()
</pre>
</p></div>
<div class="section" id="methods">
<h2>Methods</h2>
</p><p><pre class="literal-block">
# setspunctuation_set = set(string.punctuation)def set_method(book):    return ''.join(char for char in book if char not in punctuation_set)# regexpunctuation_regex = re.compile('[{0}]'.format(re.escape(string.punctuation)))def regex_method(book):    return punctuation_regex.sub('', book)# string.replacedef replace_method(book):    for punctuation in string.punctuation:        book = book.replace(punctuation, '')    return book# string.translatedef translate_method(book):    return book.translate(None, string.punctuation)
</pre>
</p></div>
<div class="section" id="results">
<h2>Results</h2>
</p><p><pre class="literal-block">
sets     : 0.0455198287964 seconds.regex    : 0.0134680271149 seconds.replace  : 0.0041608810424 seconds.translate: 0.0006558895111 seconds.
</pre>
</p><p>So, when you’re looking at stripping punctuation from gigabytes of text
files, it’s safe to say that you should be using string.translate.</p>
</p></div>

    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>